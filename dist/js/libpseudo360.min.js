function LibPseudo360(t){this.defaultParam=function(t,e){return null!=t&&typeof t==typeof e?t:e},this.strEquals=function(t,e){return!(t>e)&&!(t<e)};var e=this.defaultParam(t.debugMessages,!1);this.debugInfo=function(t){e&&console.log(t)},this.addJob=function(){this.jobsTODO+=1},this.completeJob=function(){this.jobsCompleted+=1;var t=document.getElementById(this.containerLoading);null!==t&&(t.innerHTML=Math.floor(this.jobsCompleted/this.jobsTODO*this.maxProgress).toString()+"%"),this.jobsTODO<=this.jobsCompleted&&(this.allJobsDone=!0,this.finishLoading())},this.createImage=function(t){var e=new Image,i=this;return e.src=t,e.addEventListener("load",(function(){i.completeJob()}),!1),e.addEventListener("error",(function(){i.completeJob()}),!1),e.addEventListener("dragstart",(function(t){t.preventDefault()}),!1),e.addEventListener("click",(function(t){t.preventDefault()}),!1),e.addEventListener("dlbclick",(function(t){t.preventDefault()}),!1),e},this.loadImages=function(){this.debugInfo("Images path: '"+this.imgPath+"'"),this.debugInfo("First image: '"+this.firstImg+"'"),this.debugInfo("Last image: '"+this.lastImg+"'");var t=this.firstImg.split("."),e=this.lastImg.split("."),i=!1;t[0].length==e[0].length&&this.strEquals(t[0].trim().charAt(0),"0")&&(i=!0,this.debugInfo("Image names begin with '0'!"));var s=parseInt(t[0]),n=parseInt(e[0]);this.debugInfo("Number of images: "+(n-s+1).toString()+", loading...");var a,o,h,r=new Array,m=document.getElementById(this.containerImages);for(a=s;a<=n;a++){var l;if(h="",i)for(o=t[0].length-a.toString().length,l=0;l<o;l++)h+="0";h+=a.toString()+"."+t[1],h=this.imgPath+h;var d=this.createImage(h);r.push(d),m.appendChild(d),this.addJob()}return r},this.prepareRequestAnimationFrame=function(t){void 0===window.requestAnimationFrame&&(this.debugInfo("window.requestAnimationFrame is undefined"),window.requestAnimationFrame=function(){return window.requestAnimFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){this.debugInfo("use setTimeout() for animation"),window.setTimeout(e,t)}})},this.finishLoading=function(){var t,e,i=Date.now(),s=this;this.animationLoop=function(){window.requestAnimationFrame((function(){s.animationLoop()})),s.runAnim&&!s.pause?(e=Date.now(),(t=e-i)>s.frameTime&&(i=e-t%s.frameTime,s.nextDir?s.next(!0):s.previous(!0))):i=Date.now()},"function"==typeof this.readyFunc&&this.readyFunc();var n=0,a=0;this.imgWidth>0&&this.imgWidth<=this.imgArr[0].width&&(n=this.imgWidth),this.imgHeight>0&&this.imgHeight<=this.imgArr[0].height&&(a=this.imgHeight),this.imgArr.forEach((function(t){n>0&&n>=a?t.style.width=n.toString()+"px":a>0&&a>=n&&(t.style.height=a.toString()+"px")}));var o=document.getElementById(this.containerLoading);null!==o&&o.parentNode.removeChild(o),document.getElementById(this.containerImages).style.display="",this.hideMenu||(document.getElementById(this.containerPanel).style.display=""),this.animationLoop()},this.next=function(t){void 0===t&&(t=!1),this.state===this.STATE_PREV&&(this.k+=2),t&&this.k==this.imgArr.length?(this.imgArr[this.k-1].style.display="",this.k=0):this.k>=this.imgArr.length&&(this.k=this.imgArr.length-1),this.k>0&&(this.imgArr[this.k-1].style.display=""),this.imgArr[this.k].style.display="block",this.k++,this.state=this.STATE_NEXT},this.previous=function(t){void 0===t&&(t=!1),this.state==this.STATE_NEXT&&(this.k-=2),t&&this.k<0?(this.imgArr[this.k+1].style.display="",this.k=this.imgArr.length-1):this.k<0&&(this.k=0),this.k<this.imgArr.length-1&&(this.imgArr[this.k+1].style.display=""),this.imgArr[this.k].style.display="block",this.k--,this.state=this.STATE_PREV},this.setImage=function(t){this.k=t,this.imgArr[this.k].style.display="block"},this.onMouseMove=function(t){var e=this.lastx-t.pageX;if(this.lastx=t.pageX,!(Math.abs(e)/100+.97<=1)){var i,s=Math.floor(this.imgArr.length/16);for(s<1&&(s=1),i=0;i<s;i++)e>=0?this.previous(!this.rLock):this.next(!this.rLock)}},this.addEvents=function(){var t=this;document.getElementById(this.panelRotate).addEventListener("click",(function(){t.nextDir=!t.nextDir}),!1),document.getElementById(this.panelPlay).addEventListener("click",(function(){document.getElementById(t.panelPlay).style.display="none",document.getElementById(t.panelPause).style.display="",t.pause=!1}),!1),document.getElementById(this.panelPause).addEventListener("click",(function(){document.getElementById(t.panelPause).style.display="none",document.getElementById(t.panelPlay).style.display="",t.pause=!0}),!1),document.getElementById(this.panelPrev).addEventListener("click",(function(){t.previous(!t.rLock)}),!1),document.getElementById(this.panelNext).addEventListener("click",(function(){t.next(!t.rLock)}),!1);var e=document.getElementById(this.containerImages);e.addEventListener("touchstart",(function(e){t.runAnim=!1,void 0!==e.touches[0].pageX?t.lastx=e.touches[0].pageX:void 0!==e.targetTouches[0].pageX&&(t.lastx=e.targetTouches[0].pageX),t.mouseDown=!0}),!1),e.addEventListener("mousedown",(function(e){t.runAnim=!1,t.lastx=e.pageX,t.mouseDown=!0}),!1),e.addEventListener("touchcancel",(function(e){e.preventDefault(),t.mouseDown=!1}),!1),e.addEventListener("mousemove",(function(e){t.mouseDown&&t.onMouseMove(e)}),!1),e.addEventListener("touchmove",(function(e){e.preventDefault(),t.mouseDown&&(e.pageX=0,void 0!==e.touches[0].pageX?e.pageX=e.touches[0].pageX:void 0!==e.targetTouches[0].pageX&&(e.pageX=e.targetTouches[0].pageX),t.onMouseMove(e))}),!1),e.addEventListener("mouseup",(function(){t.runAnim=!0,t.mouseDown=!1}),!1),e.addEventListener("touchend",(function(){t.runAnim=!0,t.mouseDown=!1}),!1)},this.containerLoading=this.defaultParam(t.containerLoading,"libpseudo360-loading"),this.containerMain=this.defaultParam(t.containerMain,"libpseudo360-main"),this.containerImages=this.defaultParam(t.containerImages,"libpseudo360-images"),this.containerPanel=this.defaultParam(t.containerPanel,"libpseudo360-panel"),this.panelPrev=this.defaultParam(t.panelPrev,"libpseudo360-panel-prev"),this.panelNext=this.defaultParam(t.panelNext,"libpseudo360-panel-next"),this.panelRotate=this.defaultParam(t.panelRotate,"libpseudo360-panel-rotate"),this.panelPause=this.defaultParam(t.panelPause,"libpseudo360-panel-pause"),this.panelPlay=this.defaultParam(t.panelPlay,"libpseudo360-panel-play"),this.imgPath=this.defaultParam(t.imagePath,"img/").trim(),this.strEquals(this.imgPath.charAt(this.imgPath.length-1),"/")||(this.imgPath+="/"),this.firstImg=this.defaultParam(t.firstImageName,"001.jpg").trim(),this.lastImg=this.defaultParam(t.lastImageName,"002.jpg").trim(),this.imgWidth=this.defaultParam(t.imageWidth,0),this.imgHeight=this.defaultParam(t.imageHeight,0),this.startImage=this.defaultParam(t.startImage,0),this.nextDir=this.defaultParam(t.rotateLeft,!0),this.rLock=this.defaultParam(t.cameraLock,!1),this.hideMenu=this.defaultParam(t.hideMenu,!1),this.pause=this.defaultParam(t.pause,!1),this.fps=this.defaultParam(t.fps,60),this.readyFunc=this.defaultParam(t.readyCallback,null),this.imgArr=new Array,this.k=0,this.mouseDown=!1,this.lastx=0,this.runAnim=!0,this.frameTime=1e3/this.fps/10,this.STATE_PREV=1,this.STATE_NEXT=2,this.state=0,this.jobsTODO=0,this.jobsCompleted=0,this.allJobsDone=!1,this.maxProgress=100}LibPseudo360.prototype.init=function(){document.getElementById(this.containerLoading).innerHTML="0%",document.getElementById(this.panelPause).style.display=this.pause?"none":"display",document.getElementById(this.panelPlay).style.display=this.pause?"display":"none",this.addEvents(),this.imgArr=this.loadImages(),this.startImage>0&&this.startImage<=this.imgArr.length&&(this.k=this.startImage),this.frameTime=1e3/(this.fps/(-.0625*this.imgArr.length+11)),this.prepareRequestAnimationFrame(this.frameTime),this.setImage(this.k)};